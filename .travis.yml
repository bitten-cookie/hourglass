language: python
python: "3.7"
dist: xenial

os:
  - linux
  - osx

compiler:
  - gcc
  - clang

install:
  # Install conan
  - pip3 install conan
  # Automatic detection of your arch, compiler, etc.
  - conan user
  # /usr/bin/gcc is 4.6 always, but gcc-X.Y is available.
#  - if [[ $CXX = g++ ]]; then export CXX="g++-4.9" CC="gcc-4.9"; fi
  # /usr/bin/clang has a conflict with gcc, so use clang-X.Y.
#  - if [[ $CXX = clang++ ]]; then export CXX="clang++-3.5" CC="clang-3.5"; fi


script:
  # Call the build system
  - cmake . -DBUILD_TESTS=ON -DBUILD_DEMOS=ON -DCMAKE_BUILD_TYPE=Release
  - cmake --build .
  # Run tests
  - ctest .